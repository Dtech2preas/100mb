<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DTech âš™ï¸ Advanced Settings</title>
  <style>
    :root {
      --bg: #121212;
      --text: #fff;
      --accent: #00ffd5;
      --card-bg: #1e1e1e;
      --border: #333;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Segoe UI', system-ui, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
      transition: all 0.3s ease;
    }

    h2 {
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .settings-section {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border: 1px solid var(--border);
    }

    .section-title {
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: var(--accent);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    label {
      display: block;
      margin: 15px 0 5px;
      font-weight: 500;
    }

    input, select, button, textarea {
      display: block;
      width: 100%;
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--card-bg);
      color: var(--text);
      font-size: 1rem;
      transition: all 0.2s ease;
    }

    input[type="checkbox"] {
      display: inline-block;
      width: auto;
      margin-right: 10px;
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      margin: 10px 0;
      cursor: pointer;
    }

    button {
      background-color: var(--accent);
      color: #000;
      font-weight: bold;
      cursor: pointer;
      border: none;
      margin: 20px 0;
      text-align: center;
    }

    button:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    button:active {
      transform: translateY(0);
    }

    #notif {
      display: none;
      margin: 20px 0;
      padding: 15px;
      background: var(--accent);
      color: #000;
      border-radius: 10px;
      font-weight: bold;
      animation: fadeIn 0.3s;
    }

    .color-preview {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      display: inline-block;
      margin-left: 10px;
      border: 1px solid var(--border);
    }

    .slider-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    input[type="range"] {
      flex-grow: 1;
      padding: 0;
      height: 8px;
    }

    .slider-value {
      min-width: 30px;
      text-align: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .hidden {
      display: none;
    }

    .flex-row {
      display: flex;
      gap: 15px;
    }

    .flex-row > * {
      flex: 1;
    }

    @media (max-width: 600px) {
      .flex-row {
        flex-direction: column;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <h2><span>âš™ï¸</span> DTech Advanced Settings</h2>

  <div class="settings-section">
    <div class="section-title">ğŸ‘¤ User Profile</div>
    
    <label for="username">Username:</label>
    <input type="text" id="username" placeholder="Enter your name">
    
    <label for="email">Email (optional):</label>
    <input type="email" id="email" placeholder="your@email.com">
  </div>

  <div class="settings-section">
    <div class="section-title">ğŸ¨ Appearance</div>
    
    <label for="theme">Theme:</label>
    <select id="theme">
      <option value="dark">Dark</option>
      <option value="light">Light</option>
      <option value="oled">OLED Black</option>
      <option value="sepia">Sepia</option>
      <option value="custom">Custom</option>
    </select>
    
    <div id="customThemeOptions" class="hidden">
      <label for="bgColor">Background Color:</label>
      <input type="color" id="bgColor" value="#121212">
      
      <label for="textColor">Text Color:</label>
      <input type="color" id="textColor" value="#ffffff">
      
      <label for="accentColor">Accent Color:</label>
      <input type="color" id="accentColor" value="#00ffd5">
    </div>
    
    <label for="fontSize">Font Size:</label>
    <div class="slider-container">
      <input type="range" id="fontSize" min="12" max="24" value="16">
      <span class="slider-value" id="fontSizeValue">16px</span>
    </div>
  </div>

  <div class="settings-section">
    <div class="section-title">ğŸ”Š Sound & Notifications</div>
    
    <label class="checkbox-label">
      <input type="checkbox" id="soundToggle"> Enable Sound Alerts
    </label>
    
    <div id="soundOptions" class="hidden">
      <label for="soundVolume">Notification Volume:</label>
      <div class="slider-container">
        <input type="range" id="soundVolume" min="0" max="100" value="70">
        <span class="slider-value" id="soundVolumeValue">70%</span>
      </div>
      
      <label for="notificationSound">Notification Sound:</label>
      <select id="notificationSound">
        <option value="ding">Digital Ding</option>
        <option value="chime">Soft Chime</option>
        <option value="beep">Short Beep</option>
        <option value="none">None</option>
      </select>
    </div>
    
    <label class="checkbox-label">
      <input type="checkbox" id="notifToggle"> Enable Notifications
    </label>
    
    <label class="checkbox-label">
      <input type="checkbox" id="vibrateToggle"> Enable Vibration
    </label>
    
    <label>Notification Style:</label>
    <select id="notifStyle">
      <option value="banner">Banner</option>
      <option value="alert">Alert</option>
      <option value="badge">Badge Only</option>
    </select>
  </div>

  <div class="settings-section">
    <div class="section-title">ğŸ”„ Data Management</div>
    
    <button id="exportBtn">ğŸ“¤ Export Settings</button>
    <button id="importBtn">ğŸ“¥ Import Settings</button>
    <input type="file" id="importFile" class="hidden" accept=".json">
    
    <button id="resetBtn" style="background-color: #ff4444; color: white;">ğŸ”„ Reset to Defaults</button>
  </div>

  <div class="settings-section">
    <div class="section-title">ğŸ”§ Testing</div>
    
    <button onclick="testNotification('success')">âœ… Test Success Notification</button>
    <button onclick="testNotification('warning')">âš ï¸ Test Warning Notification</button>
    <button onclick="testNotification('error')">âŒ Test Error Notification</button>
  </div>

  <div id="notif">ğŸ”” Notification Preview</div>

  <!-- Notification Sounds -->
  <audio id="ding" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" preload="auto"></audio>
  <audio id="chime" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
  <audio id="beep" src="https://actions.google.com/sounds/v1/alarms/medium_bell_ringing_near.ogg" preload="auto"></audio>

  <script>
    // Load existing settings
    window.onload = () => {
      // User Profile
      document.getElementById("username").value = localStorage.getItem("username") || "";
      document.getElementById("email").value = localStorage.getItem("email") || "";
      
      // Appearance
      const theme = localStorage.getItem("theme") || "dark";
      document.getElementById("theme").value = theme;
      document.getElementById("bgColor").value = localStorage.getItem("bgColor") || "#121212";
      document.getElementById("textColor").value = localStorage.getItem("textColor") || "#ffffff";
      document.getElementById("accentColor").value = localStorage.getItem("accentColor") || "#00ffd5";
      
      const fontSize = localStorage.getItem("fontSize") || "16";
      document.getElementById("fontSize").value = fontSize;
      document.getElementById("fontSizeValue").textContent = `${fontSize}px`;
      document.documentElement.style.fontSize = `${fontSize}px`;
      
      // Sound & Notifications
      document.getElementById("soundToggle").checked = localStorage.getItem("soundEnabled") === "true";
      document.getElementById("notifToggle").checked = localStorage.getItem("notifyEnabled") === "true";
      document.getElementById("vibrateToggle").checked = localStorage.getItem("vibrateEnabled") === "true";
      
      const soundVolume = localStorage.getItem("soundVolume") || "70";
      document.getElementById("soundVolume").value = soundVolume;
      document.getElementById("soundVolumeValue").textContent = `${soundVolume}%`;
      
      document.getElementById("notificationSound").value = localStorage.getItem("notificationSound") || "ding";
      document.getElementById("notifStyle").value = localStorage.getItem("notifStyle") || "banner";
      
      // Toggle options based on settings
      toggleSoundOptions();
      toggleCustomTheme();
      
      // Apply theme
      applyTheme(theme);
      
      // Setup event listeners
      setupEventListeners();
    };

    function setupEventListeners() {
      // Theme change
      document.getElementById("theme").addEventListener("change", function() {
        const theme = this.value;
        localStorage.setItem("theme", theme);
        applyTheme(theme);
        toggleCustomTheme();
      });
      
      // Custom theme colors
      document.getElementById("bgColor").addEventListener("input", function() {
        localStorage.setItem("bgColor", this.value);
        if (document.getElementById("theme").value === "custom") {
          applyTheme("custom");
        }
      });
      
      document.getElementById("textColor").addEventListener("input", function() {
        localStorage.setItem("textColor", this.value);
        if (document.getElementById("theme").value === "custom") {
          applyTheme("custom");
        }
      });
      
      document.getElementById("accentColor").addEventListener("input", function() {
        localStorage.setItem("accentColor", this.value);
        if (document.getElementById("theme").value === "custom") {
          applyTheme("custom");
        }
      });
      
      // Sound toggle
      document.getElementById("soundToggle").addEventListener("change", toggleSoundOptions);
      
      // Font size slider
      document.getElementById("fontSize").addEventListener("input", function() {
        const size = this.value;
        document.getElementById("fontSizeValue").textContent = `${size}px`;
        localStorage.setItem("fontSize", size);
        document.documentElement.style.fontSize = `${size}px`;
      });
      
      // Sound volume slider
      document.getElementById("soundVolume").addEventListener("input", function() {
        const volume = this.value;
        document.getElementById("soundVolumeValue").textContent = `${volume}%`;
        localStorage.setItem("soundVolume", volume);
      });
      
      // Notification sound
      document.getElementById("notificationSound").addEventListener("change", function() {
        localStorage.setItem("notificationSound", this.value);
      });
      
      // Notification style
      document.getElementById("notifStyle").addEventListener("change", function() {
        localStorage.setItem("notifStyle", this.value);
      });
      
      // Export/import buttons
      document.getElementById("exportBtn").addEventListener("click", exportSettings);
      document.getElementById("importBtn").addEventListener("click", () => {
        document.getElementById("importFile").click();
      });
      document.getElementById("importFile").addEventListener("change", importSettings);
      
      // Reset button
      document.getElementById("resetBtn").addEventListener("click", resetSettings);
    }
    
    function toggleCustomTheme() {
      const theme = document.getElementById("theme").value;
      const customOptions = document.getElementById("customThemeOptions");
      if (theme === "custom") {
        customOptions.classList.remove("hidden");
      } else {
        customOptions.classList.add("hidden");
      }
    }
    
    function toggleSoundOptions() {
      const soundEnabled = document.getElementById("soundToggle").checked;
      document.getElementById("soundOptions").classList.toggle("hidden", !soundEnabled);
      localStorage.setItem("soundEnabled", soundEnabled);
    }

    function saveSettings() {
      // User Profile
      const username = document.getElementById("username").value;
      const email = document.getElementById("email").value;
      
      // Appearance
      const theme = document.getElementById("theme").value;
      const bgColor = document.getElementById("bgColor").value;
      const textColor = document.getElementById("textColor").value;
      const accentColor = document.getElementById("accentColor").value;
      const fontSize = document.getElementById("fontSize").value;
      
      // Sound & Notifications
      const soundEnabled = document.getElementById("soundToggle").checked;
      const notifyEnabled = document.getElementById("notifToggle").checked;
      const vibrateEnabled = document.getElementById("vibrateToggle").checked;
      const soundVolume = document.getElementById("soundVolume").value;
      const notificationSound = document.getElementById("notificationSound").value;
      const notifStyle = document.getElementById("notifStyle").value;
      
      // Save to localStorage
      localStorage.setItem("username", username);
      localStorage.setItem("email", email);
      
      localStorage.setItem("theme", theme);
      localStorage.setItem("bgColor", bgColor);
      localStorage.setItem("textColor", textColor);
      localStorage.setItem("accentColor", accentColor);
      localStorage.setItem("fontSize", fontSize);
      
      localStorage.setItem("soundEnabled", soundEnabled);
      localStorage.setItem("notifyEnabled", notifyEnabled);
      localStorage.setItem("vibrateEnabled", vibrateEnabled);
      localStorage.setItem("soundVolume", soundVolume);
      localStorage.setItem("notificationSound", notificationSound);
      localStorage.setItem("notifStyle", notifStyle);
      
      // Apply changes
      applyTheme(theme);
      document.documentElement.style.fontSize = `${fontSize}px`;
      
      // Show confirmation
      showNotification("âœ… Settings saved successfully!", "success");
    }

    function applyTheme(theme) {
      let bg, text, accent, cardBg, border;
      
      switch(theme) {
        case "light":
          bg = "#ffffff";
          text = "#000000";
          accent = "#0066cc";
          cardBg = "#f5f5f5";
          border = "#ddd";
          break;
        case "oled":
          bg = "#000000";
          text = "#ffffff";
          accent = "#00ffd5";
          cardBg = "#111111";
          border = "#222";
          break;
        case "sepia":
          bg = "#f4ecd8";
          text = "#5b4636";
          accent = "#d4a017";
          cardBg = "#e4d5b7";
          border = "#d9c7a7";
          break;
        case "custom":
          bg = localStorage.getItem("bgColor") || "#121212";
          text = localStorage.getItem("textColor") || "#ffffff";
          accent = localStorage.getItem("accentColor") || "#00ffd5";
          cardBg = adjustColor(bg, 20);
          border = adjustColor(bg, 30);
          break;
        default: // dark
          bg = "#121212";
          text = "#ffffff";
          accent = "#00ffd5";
          cardBg = "#1e1e1e";
          border = "#333";
      }
      
      document.documentElement.style.setProperty("--bg", bg);
      document.documentElement.style.setProperty("--text", text);
      document.documentElement.style.setProperty("--accent", accent);
      document.documentElement.style.setProperty("--card-bg", cardBg);
      document.documentElement.style.setProperty("--border", border);
    }
    
    function adjustColor(color, amount) {
      // Simple function to adjust color lightness
      return color; // In a real implementation, you'd adjust the color
    }

    function testNotification(type = "success") {
      if (localStorage.getItem("notifyEnabled") !== "true") {
        showNotification("Please enable notifications first", "error");
        return;
      }
      
      const username = localStorage.getItem("username") || "User";
      let message, emoji;
      
      switch(type) {
        case "warning":
          message = `âš ï¸ Warning ${username}, this is a test warning!`;
          break;
        case "error":
          message = `âŒ Error ${username}, this is a test error!`;
          break;
        default:
          message = `âœ… Success ${username}, this is a test notification!`;
      }
      
      showNotification(message, type);
      
      // Play sound if enabled
      if (localStorage.getItem("soundEnabled") === "true") {
        const sound = localStorage.getItem("notificationSound") || "ding";
        if (sound !== "none") {
          const audio = document.getElementById(sound);
          audio.volume = (localStorage.getItem("soundVolume") || 70) / 100;
          audio.play();
        }
      }
      
      // Vibrate if enabled
      if (localStorage.getItem("vibrateEnabled") === "true" && "vibrate" in navigator) {
        navigator.vibrate([100, 50, 100]);
      }
    }
    
    function showNotification(message, type = "info") {
      const notif = document.getElementById("notif");
      notif.textContent = message;
      notif.style.display = "block";
      
      // Set color based on type
      switch(type) {
        case "success":
          notif.style.backgroundColor = "#4CAF50";
          break;
        case "warning":
          notif.style.backgroundColor = "#FFC107";
          notif.style.color = "#000";
          break;
        case "error":
          notif.style.backgroundColor = "#F44336";
          break;
        default:
          notif.style.backgroundColor = "var(--accent)";
          notif.style.color = "#000";
      }
      
      setTimeout(() => {
        notif.style.display = "none";
      }, 3000);
    }
    
    function exportSettings() {
      const settings = {
        version: 1,
        user: {
          username: localStorage.getItem("username") || "",
          email: localStorage.getItem("email") || ""
        },
        appearance: {
          theme: localStorage.getItem("theme") || "dark",
          bgColor: localStorage.getItem("bgColor") || "#121212",
          textColor: localStorage.getItem("textColor") || "#ffffff",
          accentColor: localStorage.getItem("accentColor") || "#00ffd5",
          fontSize: localStorage.getItem("fontSize") || "16"
        },
        sound: {
          enabled: localStorage.getItem("soundEnabled") === "true",
          volume: localStorage.getItem("soundVolume") || "70",
          sound: localStorage.getItem("notificationSound") || "ding"
        },
        notifications: {
          enabled: localStorage.getItem("notifyEnabled") === "true",
          vibrate: localStorage.getItem("vibrateEnabled") === "true",
          style: localStorage.getItem("notifStyle") || "banner"
        }
      };
      
      const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(settings, null, 2));
      const downloadAnchor = document.createElement("a");
      downloadAnchor.setAttribute("href", dataStr);
      downloadAnchor.setAttribute("download", "dtech_settings.json");
      document.body.appendChild(downloadAnchor);
      downloadAnchor.click();
      document.body.removeChild(downloadAnchor);
      
      showNotification("âš™ï¸ Settings exported successfully!", "success");
    }
    
    function importSettings(event) {
      const file = event.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const settings = JSON.parse(e.target.result);
          
          // Validate it's our settings file
          if (!settings.version || !settings.user || !settings.appearance) {
            throw new Error("Invalid settings file");
          }
          
          // Import user settings
          if (settings.user.username) localStorage.setItem("username", settings.user.username);
          if (settings.user.email) localStorage.setItem("email", settings.user.email);
          
          // Import appearance
          if (settings.appearance.theme) localStorage.setItem("theme", settings.appearance.theme);
          if (settings.appearance.bgColor) localStorage.setItem("bgColor", settings.appearance.bgColor);
          if (settings.appearance.textColor) localStorage.setItem("textColor", settings.appearance.textColor);
          if (settings.appearance.accentColor) localStorage.setItem("accentColor", settings.appearance.accentColor);
          if (settings.appearance.fontSize) localStorage.setItem("fontSize", settings.appearance.fontSize);
          
          // Import sound
          if (settings.sound) {
            localStorage.setItem("soundEnabled", settings.sound.enabled ? "true" : "false");
            if (settings.sound.volume) localStorage.setItem("soundVolume", settings.sound.volume);
            if (settings.sound.sound) localStorage.setItem("notificationSound", settings.sound.sound);
          }
          
          // Import notifications
          if (settings.notifications) {
            localStorage.setItem("notifyEnabled", settings.notifications.enabled ? "true" : "false");
            localStorage.setItem("vibrateEnabled", settings.notifications.vibrate ? "true" : "false");
            if (settings.notifications.style) localStorage.setItem("notifStyle", settings.notifications.style);
          }
          
          // Reload settings
          window.location.reload();
          showNotification("âš™ï¸ Settings imported successfully!", "success");
        } catch (error) {
          console.error("Error importing settings:", error);
          showNotification("âŒ Error importing settings", "error");
        }
      };
      reader.readAsText(file);
      
      // Reset file input
      event.target.value = "";
    }
    
    function resetSettings() {
      if (confirm("Are you sure you want to reset all settings to default values?")) {
        localStorage.clear();
        window.location.reload();
      }
    }
    
    // Auto-save when inputs change
    document.querySelectorAll('input, select').forEach(element => {
      if (element.id !== 'importFile') { // Exclude file input
        element.addEventListener('change', saveSettings);
      }
    });
  </script>
</body>
</html>