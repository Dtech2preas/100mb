<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>DTech Raw Rate Limit Data</title>
<style>
  body { font-family: monospace; background: #111; color: #0f0; padding: 1rem; }
  pre { white-space: pre-wrap; word-break: break-word; }
</style>
</head>
<body>
  <h1>üìä DTech Raw Rate Limit Data</h1>
  <pre id="output">Loading data...</pre>

  <script>
    const TOKENS_URL = "https://gist.githubusercontent.com/Preasx24/137f29d4b3b32c251bf6b7ab2b3fae28/raw/gistfile1.txt";
    const GIST_API_URL = "https://api.github.com/gists/baaadec8c55a20705b958950ae630b9f";
    const FILE_NAME = "rate.json";

    async function getRandomToken() {
      const res = await fetch(TOKENS_URL);
      const text = await res.text();
      const tokens = text.trim().split("\n").filter(t => t.startsWith("ghp_"));
      return tokens[Math.floor(Math.random() * tokens.length)];
    }

    async function fetchRawData(token) {
      const res = await fetch(GIST_API_URL, {
        headers: { Authorization: `token ${token}` }
      });
      if (!res.ok) throw new Error("Failed to fetch gist data");
      const gist = await res.json();
      return gist.files[FILE_NAME].content;
    }

    async function main() {
      const outputEl = document.getElementById("output");
      try {
        const token = await getRandomToken();
        const rawData = await fetchRawData(token);
        // Pretty print the JSON string
        const jsonData = JSON.parse(rawData);
        outputEl.textContent = JSON.stringify(jsonData, null, 2);
      } catch (err) {
        outputEl.textContent = "‚ùå Error loading data:\n" + err.message;
        console.error(err);
      }
    }

    main();
  </script>
</body>
</html>