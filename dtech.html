<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"><title>Debug GitHub Usage</title></head>
<body>
  <h1>ðŸ“Š Debug Usage Collector</h1>
  <div><strong>Today â‰¦24h:</strong> <span id="today">0</span></div>
  <div><strong>Yesterday (24â€“48h):</strong> <span id="yesterday">0</span></div>
  <div><strong>Month â‰¤30d:</strong> <span id="month">0</span></div>
  <pre id="log"></pre>
  <script>
    (async () => {
      // Test data (your provided JSON)
      const data = /* paste your JSON array here */;

      const now = Date.now();
      const ONE_DAY = 24 * 60 * 60 * 1000;
      const TWO_DAYS = 2 * ONE_DAY;
      const THIRTY_DAYS = 30 * ONE_DAY;

      let totalToday = 0, totalYesterday = 0, totalMonth = 0;
      const log = [];

      data.forEach(e => {
        const ts = new Date(e.timestamp).getTime();
        const used = e.limit - e.remaining;
        const age = now - ts;
        let bucket = '';

        if (age <= ONE_DAY) {
          totalToday += used; bucket = 'today';
        } else if (age <= TWO_DAYS) {
          totalYesterday += used; bucket = 'yesterday';
        }

        if (age <= THIRTY_DAYS) {
          totalMonth += used;
        }

        log.push({ timestamp: e.timestamp, used, age, bucket });
      });

      document.getElementById('today').textContent = totalToday;
      document.getElementById('yesterday').textContent = totalYesterday;
      document.getElementById('month').textContent = totalMonth;

      document.getElementById('log').textContent = log
        .map(l => JSON.stringify(l))
        .join('\n');
    })();
  </script>
</body>
</html>