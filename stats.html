<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üìä Advanced JSON Data Visualizer</title>
  <style>
    :root {
      --primary: #3498db;
      --secondary: #9b59b6;
      --success: #2ecc71;
      --danger: #e74c3c;
      --light: #ecf0f1;
      --dark: #2c3e50;
      --gray: #95a5a6;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 20px;
      background: #f5f7fa;
      color: var(--dark);
      max-width: 1400px;
      margin: 0 auto;
      line-height: 1.6;
    }
    
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 1200px) {
      .container {
        grid-template-columns: 1fr;
      }
    }
    
    .card {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.05);
      padding: 25px;
      margin-bottom: 20px;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .card:hover {
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
      transform: translateY(-2px);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .raw-json {
      grid-column: 1 / -1;
    }
    
    textarea {
      width: 100%;
      height: 500px;
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 14px;
      background: #f8f9fa;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      resize: vertical;
      line-height: 1.5;
      white-space: pre;
      overflow-x: auto;
    }
    
    h1 {
      color: var(--dark);
      margin-bottom: 10px;
      font-size: 2.2rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    h2 {
      color: var(--primary);
      margin: 0;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .stat-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .stat {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      border-left: 4px solid var(--primary);
    }
    
    .stat-title {
      font-weight: 600;
      color: var(--gray);
      margin-bottom: 5px;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .stat-value {
      font-size: 1.8rem;
      color: var(--dark);
      font-weight: 700;
    }
    
    .stat-description {
      font-size: 0.85rem;
      color: var(--gray);
      margin-top: 5px;
    }
    
    .bar-chart {
      height: 8px;
      background: var(--light);
      border-radius: 4px;
      margin: 10px 0;
      overflow: hidden;
    }
    
    .bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      border-radius: 4px;
    }
    
    .data-table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      font-size: 0.95rem;
    }
    
    .data-table th, .data-table td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    
    .data-table th {
      background: #f8f9fa;
      font-weight: 600;
      color: var(--dark);
    }
    
    .data-table tr:hover {
      background: #f5f7fa;
    }
    
    .error {
      color: var(--danger);
      background: #fdecea;
      padding: 15px;
      border-radius: 6px;
      border-left: 4px solid var(--danger);
    }
    
    .loading {
      color: var(--gray);
      font-style: italic;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .loading::after {
      content: "";
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(0,0,0,0.1);
      border-radius: 50%;
      border-top-color: var(--primary);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .user-info {
      background: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
    }
    
    .info-item {
      background: white;
      padding: 12px 15px;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .info-label {
      font-weight: 600;
      color: var(--gray);
      font-size: 0.85rem;
      margin-bottom: 5px;
    }
    
    .info-value {
      font-size: 1.1rem;
      color: var(--dark);
      word-break: break-all;
    }
    
    .copy-btn {
      background: var(--light);
      border: none;
      padding: 2px 8px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.8rem;
      margin-left: 5px;
      transition: background 0.2s;
    }
    
    .copy-btn:hover {
      background: #d5dbdb;
    }
    
    .copy-btn.copied {
      background: var(--success);
      color: white;
    }
    
    .timeline {
      position: relative;
      padding-left: 30px;
    }
    
    .timeline::before {
      content: "";
      position: absolute;
      left: 10px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--light);
    }
    
    .timeline-item {
      position: relative;
      padding-bottom: 20px;
      padding-left: 20px;
    }
    
    .timeline-item:last-child {
      padding-bottom: 0;
    }
    
    .timeline-dot {
      position: absolute;
      left: 0;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.7rem;
    }
    
    .timeline-date {
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 5px;
    }
    
    .timeline-content {
      background: white;
      padding: 15px;
      border-radius: 6px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .property-badge {
      display: inline-block;
      padding: 3px 10px;
      background: #e0f7fa;
      border-radius: 12px;
      margin-right: 8px;
      margin-bottom: 8px;
      font-size: 0.8rem;
      color: #00838f;
    }
    
    .time-stats {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .time-stat {
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .url-display {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 6px;
      font-family: monospace;
      word-break: break-all;
      margin: 10px 0;
      position: relative;
    }
    
    .url-display .copy-btn {
      position: absolute;
      right: 10px;
      top: 10px;
    }
    
    .pill {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-right: 5px;
    }
    
    .pill.primary {
      background: #e3f2fd;
      color: #1976d2;
    }
    
    .pill.success {
      background: #e8f5e9;
      color: #388e3c;
    }
    
    .pill.warning {
      background: #fff8e1;
      color: #ffa000;
    }
  </style>
</head>
<body>
  <h1>üìä <span>Advanced JSON Data Visualizer</span></h1>
  
  <div id="userInfo" class="user-info loading">
    <div class="loading">Loading user information...</div>
  </div>
  
  <div class="container">
    <div class="card raw-json">
      <div class="card-header">
        <h2>üìÑ Raw JSON Data</h2>
        <button id="copyRawBtn" class="copy-btn">Copy</button>
      </div>
      <textarea readonly id="jsonViewer">Loading JSON data...</textarea>
    </div>
    
    <div class="card">
      <div class="card-header">
        <h2>üìà Data Statistics</h2>
      </div>
      <div id="statsContainer">
        <div class="loading">Calculating statistics...</div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <h2>üîç Data Structure</h2>
      </div>
      <div id="structureContainer">
        <div class="loading">Analyzing structure...</div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <h2>‚è≥ Time Analysis</h2>
      </div>
      <div id="timeContainer">
        <div class="loading">Analyzing timestamps...</div>
      </div>
    </div>
    
    <div class="card">
      <div class="card-header">
        <h2>üîó URL Information</h2>
      </div>
      <div id="urlContainer">
        <div class="loading">Preparing URL information...</div>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="card-header">
      <h2>‚è±Ô∏è Activity Timeline</h2>
    </div>
    <div id="timelineContainer">
      <div class="loading">Building timeline...</div>
    </div>
  </div>

  <script>
    // Get user info from localStorage
    const userInfo = JSON.parse(localStorage.getItem('loggedInUser')) || {};
    let gistUrl = userInfo.gistUrl || "https://gist.github.com/Dtech2preas/baf8538c85354add526e6cb4c40dcd3a";
    let gistId = userInfo.gistId || "baf8538c85354add526e6cb4c40dcd3a";
    const filename = userInfo.username ? `${userInfo.username}.json` : "Data.json";
    
    // Extract owner and gistId from URL if available
    if (gistUrl.includes('gist.github.com')) {
      const urlParts = gistUrl.split('/');
      if (urlParts.length >= 5) {
        // The owner is the 4th part in the URL (github.com/[owner]/gist/[id])
        const owner = urlParts[3];
        gistId = urlParts[4];
        gistUrl = `https://gist.github.com/${owner}/${gistId}`;
      }
    }
    
    // Construct raw URL
    const rawURL = `https://gist.githubusercontent.com/Dtech2preas/${gistId}/raw/${filename}`;
    
    // Update UI with user info
    const userInfoElement = document.getElementById('userInfo');
    if (userInfo.username) {
      userInfoElement.innerHTML = `
        <div class="info-item">
          <div class="info-label">üë§ Username</div>
          <div class="info-value">${userInfo.username}</div>
        </div>
        <div class="info-item">
          <div class="info-label">üìÅ Filename</div>
          <div class="info-value">${filename}</div>
        </div>
        <div class="info-item">
          <div class="info-label">üîó Gist URL</div>
          <div class="info-value">${gistUrl}</div>
        </div>
        <div class="info-item">
          <div class="info-label">üÜî Gist ID</div>
          <div class="info-value">${gistId}</div>
        </div>
      `;
    } else {
      userInfoElement.innerHTML = `
        <div class="info-item">
          <div class="info-label">‚ö†Ô∏è Notice</div>
          <div class="info-value">No user info found in localStorage. Using default Gist.</div>
        </div>
        <div class="info-item">
          <div class="info-label">üìÅ Filename</div>
          <div class="info-value">${filename}</div>
        </div>
        <div class="info-item">
          <div class="info-label">üîó Gist URL</div>
          <div class="info-value">${gistUrl}</div>
        </div>
      `;
    }
    
    // Setup copy buttons
    function setupCopyButtons() {
      document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', function() {
          const targetId = this.getAttribute('data-target');
          let textToCopy = '';
          
          if (targetId) {
            textToCopy = document.getElementById(targetId).textContent;
          } else if (this.id === 'copyRawBtn') {
            textToCopy = document.getElementById('jsonViewer').value;
          }
          
          navigator.clipboard.writeText(textToCopy).then(() => {
            this.classList.add('copied');
            this.textContent = 'Copied!';
            setTimeout(() => {
              this.classList.remove('copied');
              this.textContent = 'Copy';
            }, 2000);
          });
        });
      });
    }

    async function loadGistJSON() {
      try {
        document.getElementById('jsonViewer').value = "Fetching data...";
        
        const response = await fetch(rawURL);
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const text = await response.text();
        let jsonData;
        
        try {
          jsonData = JSON.parse(text);
          const formatted = JSON.stringify(jsonData, null, 2);
          document.getElementById('jsonViewer').value = formatted;
          analyzeData(jsonData);
        } catch (err) {
          document.getElementById('jsonViewer').value = text;
          throw new Error("Data is not valid JSON");
        }
      } catch (err) {
        document.getElementById('jsonViewer').value = `‚ùå Error: ${err.message}`;
        document.getElementById('statsContainer').innerHTML = `
          <div class="error">Failed to load or parse data: ${err.message}</div>
        `;
      } finally {
        setupCopyButtons();
      }
    }
    
    function analyzeData(data) {
      // Basic statistics
      const statsContainer = document.getElementById('statsContainer');
      const structureContainer = document.getElementById('structureContainer');
      const timelineContainer = document.getElementById('timelineContainer');
      const timeContainer = document.getElementById('timeContainer');
      const urlContainer = document.getElementById('urlContainer');
      
      if (typeof data !== 'object' || data === null) {
        statsContainer.innerHTML = `
          <div class="error">Data is not an object. Cannot analyze.</div>
        `;
        return;
      }
      
      // Calculate statistics
      const isArray = Array.isArray(data);
      const itemCount = isArray ? data.length : Object.keys(data).length;
      const depth = calculateDepth(data);
      
      // Count timestamp entries
      let timestampCount = 0;
      let uniqueProperties = new Set();
      let uniqueValues = {};
      let allUrls = new Set();
      const timestampEntries = [];
      
      for (const key in data) {
        if (key.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)) {
          timestampCount++;
          const entry = data[key];
          timestampEntries.push({
            date: key,
            data: entry
          });
          
          for (const prop in entry) {
            uniqueProperties.add(prop);
            if (!uniqueValues[prop]) uniqueValues[prop] = new Set();
            uniqueValues[prop].add(entry[prop]);
            
            if (prop === 'page_url' && entry[prop]) {
              allUrls.add(entry[prop]);
            }
          }
        }
      }
      
      // Time analysis
      let timeStatsHTML = '';
      if (timestampEntries.length > 0) {
        // Sort entries by date
        timestampEntries.sort((a, b) => new Date(a.date) - new Date(b.date));
        
        const firstDate = new Date(timestampEntries[0].date);
        const lastDate = new Date(timestampEntries[timestampEntries.length - 1].date);
        const totalDays = Math.round((lastDate - firstDate) / (1000 * 60 * 60 * 24));
        
        // Group by day
        const entriesByDay = {};
        timestampEntries.forEach(entry => {
          const date = new Date(entry.date);
          const dateStr = date.toISOString().split('T')[0];
          if (!entriesByDay[dateStr]) entriesByDay[dateStr] = [];
          entriesByDay[dateStr].push(entry);
        });
        
        // Get yesterday and today's dates
        const today = new Date().toISOString().split('T')[0];
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayStr = yesterday.toISOString().split('T')[0];
        
        timeStatsHTML = `
          <div class="time-stats">
            <div class="time-stat">
              <div class="stat-title">First Entry</div>
              <div class="stat-value">${formatDate(firstDate)}</div>
              <div class="stat-description">${timeAgo(firstDate)}</div>
            </div>
            
            <div class="time-stat">
              <div class="stat-title">Last Entry</div>
              <div class="stat-value">${formatDate(lastDate)}</div>
              <div class="stat-description">${timeAgo(lastDate)}</div>
            </div>
            
            <div class="time-stat">
              <div class="stat-title">Total Duration</div>
              <div class="stat-value">${totalDays} days</div>
              <div class="stat-description">${timestampEntries.length} entries</div>
            </div>
            
            <div class="time-stat">
              <div class="stat-title">Today's Entries</div>
              <div class="stat-value">${entriesByDay[today] ? entriesByDay[today].length : 0}</div>
              <div class="stat-description">${today}</div>
            </div>
            
            <div class="time-stat">
              <div class="stat-title">Yesterday's Entries</div>
              <div class="stat-value">${entriesByDay[yesterdayStr] ? entriesByDay[yesterdayStr].length : 0}</div>
              <div class="stat-description">${yesterdayStr}</div>
            </div>
            
            <div class="time-stat">
              <div class="stat-title">Average Per Day</div>
              <div class="stat-value">${(timestampEntries.length / (totalDays || 1)).toFixed(1)}</div>
              <div class="stat-description">entries per day</div>
            </div>
          </div>
        `;
      } else {
        timeStatsHTML = `<div class="error">No timestamp entries found for time analysis</div>`;
      }
      
      // URL information
      let urlHTML = '';
      if (allUrls.size > 0) {
        urlHTML = `
          <div class="stat-title">Found ${allUrls.size} unique URLs:</div>
          ${Array.from(allUrls).map(url => `
            <div class="url-display">
              ${url}
              <button class="copy-btn" data-target="url-${url.hashCode()}">Copy</button>
              <span id="url-${url.hashCode()}" style="display:none">${url}</span>
            </div>
          `).join('')}
        `;
      } else {
        urlHTML = `<div class="error">No URLs found in the data</div>`;
      }
      
      // Basic stats
      let statsHTML = `
        <div class="stat-grid">
          <div class="stat">
            <div class="stat-title">Data Type</div>
            <div class="stat-value">${isArray ? 'Array' : 'Object'}</div>
            <div class="stat-description">${isArray ? 'Ordered collection' : 'Key-value pairs'}</div>
          </div>
          
          <div class="stat">
            <div class="stat-title">Total Items</div>
            <div class="stat-value">${itemCount}</div>
            <div class="stat-description">${timestampCount} timestamped</div>
          </div>
          
          <div class="stat">
            <div class="stat-title">Nesting Depth</div>
            <div class="stat-value">${depth}</div>
            <div class="bar-chart">
              <div class="bar" style="width: ${Math.min(depth * 20, 100)}%"></div>
            </div>
          </div>
          
          <div class="stat">
            <div class="stat-title">Unique Properties</div>
            <div class="stat-value">${uniqueProperties.size}</div>
            <div class="stat-description">Across all entries</div>
          </div>
        </div>
        
        <div class="stat-title" style="margin-top:20px;">Property Distribution</div>
        ${Object.entries(uniqueValues).map(([prop, values]) => `
          <div style="margin:10px 0;">
            <div style="display:flex; justify-content:space-between;">
              <span>${prop}</span>
              <span>${values.size} unique values</span>
            </div>
            <div class="bar-chart">
              <div class="bar" style="width: ${Math.min(values.size * 5, 100)}%"></div>
            </div>
          </div>
        `).join('')}
      `;
      
      // Structure analysis
      let structureHTML = '';
      if (isArray) {
        if (data.length > 0) {
          const sampleItem = data[0];
          structureHTML = `
            <p>First item structure:</p>
            <pre>${JSON.stringify(getStructure(sampleItem), null, 2)}</pre>
          `;
        }
      } else {
        // Show the main structure (non-timestamp properties)
        const mainProperties = {};
        for (const key in data) {
          if (!key.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)) {
            mainProperties[key] = {
              type: typeof data[key],
              value: data[key]
            };
          }
        }
        
        structureHTML = `
          <div style="margin-bottom:20px;">
            <h3 style="margin-bottom:10px;">Root Properties</h3>
            <table class="data-table">
              <thead>
                <tr>
                  <th>Key</th>
                  <th>Type</th>
                  <th>Example Value</th>
                </tr>
              </thead>
              <tbody>
                ${Object.entries(mainProperties).map(([key, info]) => `
                  <tr>
                    <td>${key}</td>
                    <td><span class="pill ${getPillClass(info.type)}">${info.type}</span></td>
                    <td>${truncate(JSON.stringify(info.value), 50)}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          </div>
          
          <div>
            <h3 style="margin-bottom:10px;">Timestamp Entry Structure</h3>
            <pre>${JSON.stringify(getTimestampEntryStructure(data), null, 2)}</pre>
          </div>
        `;
      }
      
      // Build timeline
      let timelineHTML = '';
      if (timestampEntries.length > 0) {
        // Sort by date (newest first)
        timestampEntries.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        timelineHTML = `
          <div class="timeline">
            ${timestampEntries.slice(0, 50).map((entry, index) => `
              <div class="timeline-item">
                <div class="timeline-dot">${index + 1}</div>
                <div class="timeline-date">${formatDate(entry.date)}</div>
                <div class="timeline-content">
                  ${Object.entries(entry.data).map(([key, value]) => `
                    <div><strong>${key}:</strong> ${formatValue(key, value)}</div>
                  `).join('')}
                </div>
              </div>
            `).join('')}
          </div>
        `;
        
        if (timestampEntries.length > 50) {
          timelineHTML += `<p style="text-align:center;margin-top:15px;">Showing 50 of ${timestampEntries.length} entries</p>`;
        }
      } else {
        timelineHTML = `<div class="error">No timestamp entries found for timeline</div>`;
      }
      
      statsContainer.innerHTML = statsHTML;
      structureContainer.innerHTML = structureHTML;
      timelineContainer.innerHTML = timelineHTML;
      timeContainer.innerHTML = timeStatsHTML;
      urlContainer.innerHTML = urlHTML;
      
      // Re-setup copy buttons for the new elements
      setupCopyButtons();
    }
    
    // Helper functions
    function calculateDepth(obj, currentDepth = 0) {
      if (typeof obj !== 'object' || obj === null) return currentDepth;
      
      const isArray = Array.isArray(obj);
      const entries = isArray ? obj : Object.values(obj);
      
      if (entries.length === 0) return currentDepth + 1;
      
      const depths = entries.map(item => calculateDepth(item, currentDepth + 1));
      return Math.max(...depths);
    }
    
    function getStructure(obj) {
      if (typeof obj !== 'object' || obj === null) return typeof obj;
      
      if (Array.isArray(obj)) {
        if (obj.length === 0) return 'array';
        return [getStructure(obj[0])];
      }
      
      const structure = {};
      for (const key in obj) {
        structure[key] = getStructure(obj[key]);
      }
      return structure;
    }
    
    function getTimestampEntryStructure(data) {
      for (const key in data) {
        if (key.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/)) {
          return getStructure(data[key]);
        }
      }
      return "No timestamp entries found";
    }
    
    function truncate(str, length) {
      if (typeof str !== 'string') str = JSON.stringify(str);
      return str.length > length ? str.substring(0, length) + '...' : str;
    }
    
    function formatDate(date) {
      if (!(date instanceof Date)) date = new Date(date);
      return date.toLocaleString('en-US', {
        year: 'numeric',
        month: 'short',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
    }
    
    function timeAgo(date) {
      if (!(date instanceof Date)) date = new Date(date);
      const seconds = Math.floor((new Date() - date) / 1000);
      
      let interval = Math.floor(seconds / 31536000);
      if (interval >= 1) return `${interval} year${interval === 1 ? '' : 's'} ago`;
      
      interval = Math.floor(seconds / 2592000);
      if (interval >= 1) return `${interval} month${interval === 1 ? '' : 's'} ago`;
      
      interval = Math.floor(seconds / 86400);
      if (interval >= 1) return `${interval} day${interval === 1 ? '' : 's'} ago`;
      
      interval = Math.floor(seconds / 3600);
      if (interval >= 1) return `${interval} hour${interval === 1 ? '' : 's'} ago`;
      
      interval = Math.floor(seconds / 60);
      if (interval >= 1) return `${interval} minute${interval === 1 ? '' : 's'} ago`;
      
      return `${Math.floor(seconds)} second${seconds === 1 ? '' : 's'} ago`;
    }
    
    function formatValue(key, value) {
      if (key === 'page_url' && typeof value === 'string') {
        return `<a href="${value}" target="_blank">${truncate(value, 50)}</a>`;
      }
      return truncate(value, 100);
    }
    
    function getPillClass(type) {
      switch(type) {
        case 'string': return 'primary';
        case 'number': return 'success';
        case 'boolean': return 'warning';
        default: return '';
      }
    }
    
    // Add hashCode function for strings
    String.prototype.hashCode = function() {
      let hash = 0;
      for (let i = 0; i < this.length; i++) {
        const char = this.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // Convert to 32bit integer
      }
      return hash;
    };
    
    // Load the data
    loadGistJSON();
  </script>
</body>
</html>