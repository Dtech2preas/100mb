<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML Previewer</title>
  <style>
    body { font-family: sans-serif; text-align: center; }
    #preview-container { margin-top: 20px; }
    iframe { width: 90%; height: 400px; border: 1px solid #ccc; }
    button { margin: 5px; padding: 10px 15px; }
    #urlDisplay { margin-top: 10px; font-weight: bold; }
  </style>
</head>
<body>
  <h2>HTML Previewer</h2>

  <!-- File or code input -->
  <input type="file" id="fileInput" accept=".html">
  <textarea id="codeInput" rows="8" cols="60" placeholder="Paste HTML code here"></textarea>
  <br>
  <button onclick="previewHTML()">Preview</button>
  <button onclick="toggleFullscreen()">Fullscreen</button>
  <button onclick="goToWe()">Go to we.html</button>
  <button onclick="goToCustom()">Go to Custom URL</button>

  <!-- Hidden tokens -->
  <div style="display:none;">
    <span id="token1">TOKEN_1_HERE</span>
    <span id="token2">TOKEN_2_HERE</span>
    <span id="token3">TOKEN_3_HERE</span>
  </div>

  <!-- Preview section -->
  <div id="preview-container">
    <iframe id="previewFrame"></iframe>
    <div id="urlDisplay"></div>
  </div>

  <script>
    function getRandomToken() {
      let tokens = [
        document.getElementById("token1").textContent.trim(),
        document.getElementById("token2").textContent.trim()
      ];
      return tokens[Math.floor(Math.random() * tokens.length)];
    }

    function previewHTML() {
      const fileInput = document.getElementById("fileInput").files[0];
      const codeInput = document.getElementById("codeInput").value;
      const iframe = document.getElementById("previewFrame");
      const urlDisplay = document.getElementById("urlDisplay");

      let htmlContent = "";

      if (fileInput) {
        const reader = new FileReader();
        reader.onload = function(e) {
          htmlContent = e.target.result;
          iframe.srcdoc = htmlContent;
          urlDisplay.textContent = "Website URL: preview.html";
        };
        reader.readAsText(fileInput);
      } else if (codeInput.trim() !== "") {
        htmlContent = codeInput;
        iframe.srcdoc = htmlContent;
        urlDisplay.textContent = "Website URL: preview.html";
      } else {
        alert("Please upload a file or paste HTML code.");
      }

      // Token is chosen but stays hidden
      let chosenToken = getRandomToken();
      console.log("Using token (hidden): " + chosenToken);
    }

    function toggleFullscreen() {
      const iframe = document.getElementById("previewFrame");
      if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
      } else if (iframe.mozRequestFullScreen) { 
        iframe.mozRequestFullScreen();
      } else if (iframe.webkitRequestFullscreen) { 
        iframe.webkitRequestFullscreen();
      } else if (iframe.msRequestFullscreen) { 
        iframe.msRequestFullscreen();
      }
    }

    function goToWe() {
      window.location.href = "we.html";
    }

    function goToCustom() {
      let customURL = prompt("Enter custom URL:");
      if (customURL) {
        window.location.href = customURL;
      }
    }
  </script>
</body>
</html>